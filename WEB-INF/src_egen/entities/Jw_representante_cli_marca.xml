<class>com.egen.develop.integration.model.VObject</class>
<componentType>com.egen.webide.integration.components.StandardJavaview</componentType>
<name>Jw_representante_cli_marca</name>
<lastUsedTemplate>e-gen_jdbcutil_standard_entity_mapping</lastUsedTemplate>
<columns>
<columns_item>
<class>com.egen.develop.integration.model.VObjectColumn</class>
<columnName>cli_cdgo</columnName>
<discard>false</discard>
<columnProperties>
<columnProperties_item>
<$key>not_null</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>help</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>case_restriction</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>validate_type</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>length</$key>
<$value>22</$value>
</columnProperties_item>
<columnProperties_item>
<$key>i18n</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>html_type</$key>
<$value>text</$value>
</columnProperties_item>
<columnProperties_item>
<$key>label</$key>
<$value>cli_cdgo</$value>
</columnProperties_item>
<columnProperties_item>
<$key>format</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>type</$key>
<$value>int</$value>
</columnProperties_item>
<columnProperties_item>
<$key>size</$key>
<$value>22</$value>
</columnProperties_item>
</columnProperties>
</columns_item>
<columns_item>
<class>com.egen.develop.integration.model.VObjectColumn</class>
<columnName>cli_rzao</columnName>
<discard>false</discard>
<columnProperties>
<columnProperties_item>
<$key>not_null</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>case_restriction</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>help</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>validate_type</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>length</$key>
<$value>4000</$value>
</columnProperties_item>
<columnProperties_item>
<$key>html_type</$key>
<$value>text</$value>
</columnProperties_item>
<columnProperties_item>
<$key>i18n</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>label</$key>
<$value>cli_rzao</$value>
</columnProperties_item>
<columnProperties_item>
<$key>format</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>type</$key>
<$value>java.lang.String</$value>
</columnProperties_item>
<columnProperties_item>
<$key>size</$key>
<$value>4000</$value>
</columnProperties_item>
</columnProperties>
</columns_item>
<columns_item>
<class>com.egen.develop.integration.model.VObjectColumn</class>
<columnName>codigo_marca</columnName>
<discard>false</discard>
<columnProperties>
<columnProperties_item>
<$key>not_null</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>case_restriction</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>help</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>validate_type</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>length</$key>
<$value>22</$value>
</columnProperties_item>
<columnProperties_item>
<$key>html_type</$key>
<$value>text</$value>
</columnProperties_item>
<columnProperties_item>
<$key>i18n</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>label</$key>
<$value>codigo_marca</$value>
</columnProperties_item>
<columnProperties_item>
<$key>format</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>type</$key>
<$value>int</$value>
</columnProperties_item>
<columnProperties_item>
<$key>size</$key>
<$value>22</$value>
</columnProperties_item>
</columnProperties>
</columns_item>
<columns_item>
<class>com.egen.develop.integration.model.VObjectColumn</class>
<columnName>rep_cdgo</columnName>
<discard>false</discard>
<columnProperties>
<columnProperties_item>
<$key>not_null</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>case_restriction</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>help</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>validate_type</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>length</$key>
<$value>4000</$value>
</columnProperties_item>
<columnProperties_item>
<$key>i18n</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>html_type</$key>
<$value>text</$value>
</columnProperties_item>
<columnProperties_item>
<$key>label</$key>
<$value>rep_cdgo</$value>
</columnProperties_item>
<columnProperties_item>
<$key>format</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>type</$key>
<$value>java.lang.String</$value>
</columnProperties_item>
<columnProperties_item>
<$key>size</$key>
<$value>4000</$value>
</columnProperties_item>
</columnProperties>
</columns_item>
<columns_item>
<class>com.egen.develop.integration.model.VObjectColumn</class>
<columnName>rep_rzao</columnName>
<discard>false</discard>
<columnProperties>
<columnProperties_item>
<$key>not_null</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>case_restriction</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>help</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>validate_type</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>length</$key>
<$value>4000</$value>
</columnProperties_item>
<columnProperties_item>
<$key>html_type</$key>
<$value>text</$value>
</columnProperties_item>
<columnProperties_item>
<$key>i18n</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>label</$key>
<$value>rep_rzao</$value>
</columnProperties_item>
<columnProperties_item>
<$key>format</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>type</$key>
<$value>java.lang.String</$value>
</columnProperties_item>
<columnProperties_item>
<$key>size</$key>
<$value>4000</$value>
</columnProperties_item>
</columnProperties>
</columns_item>
<columns_item>
<class>com.egen.develop.integration.model.VObjectColumn</class>
<columnName>ref_grupo_posicao_fab</columnName>
<discard>false</discard>
<columnProperties>
<columnProperties_item>
<$key>not_null</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>help</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>case_restriction</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>validate_type</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>length</$key>
<$value>22</$value>
</columnProperties_item>
<columnProperties_item>
<$key>i18n</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>html_type</$key>
<$value>text</$value>
</columnProperties_item>
<columnProperties_item>
<$key>label</$key>
<$value>ref_grupo_posicao_fab</$value>
</columnProperties_item>
<columnProperties_item>
<$key>format</$key>
<$value></$value>
</columnProperties_item>
<columnProperties_item>
<$key>type</$key>
<$value>int</$value>
</columnProperties_item>
<columnProperties_item>
<$key>size</$key>
<$value>22</$value>
</columnProperties_item>
</columnProperties>
</columns_item>
</columns>
<properties>
<properties_item>
<$key>schema</$key>
<$value></$value>
</properties_item>
<properties_item>
<$key>db_type</$key>
<$value>javaview</$value>
</properties_item>
<properties_item>
<$key>query</$key>
<$value>SELECT qry.cli_cdgo,
       qry.cli_rzao,
       qry.codigo_marca,
       qry.rep_cdgo,
       rep.rep_rzao,
	   ref_grupo_posicao_fab
  FROM (SELECT cli.cli_cdgo,
               cli.cli_rzao,
               mp.codigo_marca,
			   CASE WHEN cli_cdgo <> 40000 THEN
               pck_representante.get_rep_by_cli_marca(cli.cli_cdgo,
                                                      (SELECT min(codigo_sequencial)
                                                      from (
                                                        select nvl(cr.codigo_sequencial,99999999) codigo_sequencial
                                                        FROM cliente_representante cr, representante_marca rm, rep
                                                       WHERE cr.codigo_representante = rm.codigo_representante
                                                         AND rm.codigo_representante = rep.rep_cdgo
                                                         AND cr.codigo_cliente = cli.cli_cdgo
                                                         AND rm.marca_produto = mp.codigo_marca
                                                         AND cr.situacao = 'A'
                                                         AND rm.situacao = 'A'
                                                         AND rep.codigo_tipo_contrato NOT IN (1, 4, 6)
                                                         UNION ALL
                                                         SELECT cr.codigo_sequencial
                                                        FROM cliente_representante cr, representante_marca rm, rep
                                                       WHERE cr.codigo_representante = rm.codigo_representante
                                                         AND rm.codigo_representante = rep.rep_cdgo
                                                         AND cr.codigo_cliente = cli.cli_cdgo
                                                         AND rm.marca_produto = mp.codigo_marca
                                                         AND cr.situacao = 'A'
                                                         AND rm.situacao = 'A'
                                                         AND rep.codigo_tipo_contrato = 4
                                                         AND rep.rep_cdgo <> 19
                                                         AND NOT EXISTS(SELECT cr.codigo_sequencial
                                                        FROM cliente_representante cr, representante_marca rm, rep
                                                       WHERE cr.codigo_representante = rm.codigo_representante
                                                         AND rm.codigo_representante = rep.rep_cdgo
                                                         AND cr.codigo_cliente = cli.cli_cdgo
                                                         AND rm.marca_produto = mp.codigo_marca
                                                         AND cr.situacao = 'A'
                                                         AND rm.situacao = 'A'
                                                         AND rep.codigo_tipo_contrato NOT IN (1, 4, 6)))
														 ),
                                                      mp.codigo_marca
													 ,null
													 ,null
													 ,gpf.codigo_grupo) else '19' end rep_cdgo
             , gpf.codigo_grupo ref_grupo_posicao_fab													 
          FROM cli
		     , marcas_produtos mp
			 , grupo_posicao_fabrica gpf
         WHERE mp.status = 'A'
           AND cli.cli_situ = 'A') qry,
       rep
 WHERE rep.rep_cdgo = qry.rep_cdgo
</$value>
</properties_item>
<properties_item>
<$key>metadata</$key>
<$value></$value>
</properties_item>
</properties>
