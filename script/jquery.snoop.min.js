/*
 * Snoop - jQuery JavaScript Library Plug-in
 * http://code.google.com/p/jquery-snoop/
 *
 * Copyright (c) 2010 Lucas Nascimento Arruda
 * Licensed under the MIT license.
 * http://en.wikipedia.org/wiki/MIT_License
 *
 * Date: (Wed, 22 Apr 2010)
 *
 * @requires jQuery version 1.3+
 * @author Lucas Arruda <lucasarruda>live.com
 * @extends jQuery
 * @thanks Manoel Carvalho <manoelhc>gmail.com
 */
var jQuerySnoop={hiddenPool:[],interval:300,thread:null,heap:function(a,d){var b=jQuery(a.selector);if(b.length>0&&b.is(":input[type=hidden]")){var c=false;if(this.hiddenPool.length!=0){jQuery.each(this.hiddenPool,function(e,f){if(f==null){jQuerySnoop.hiddenPool[e]={selector:a.selector,value:a.val(),procedure:d,enable:true};c=true;return false}})}if(!c){this.hiddenPool.push({selector:a.selector,value:a.val(),procedure:d,enable:true})}if(this.thread==null){this.listen()}}},check:function(){var a=true;jQuery.each(jQuerySnoop.hiddenPool,function(c,d){if(d!=null){var b=jQuery(d.selector);if(b.length>0){if(d.value!=b.val()&&d.enable==true){d.procedure();d.value=b.val()}if(a){a=false}}else{jQuerySnoop.hiddenPool[c]=null}}});if(a){clearInterval(jQuerySnoop.thread);jQuerySnoop.thread=null;jQuerySnoop.hiddenPool=[]}},setOption:function(a,b){switch(a){case"interval":if(typeof(b)=="number"){this.interval=b}break;default:break}},doAction:function(a,b){jQuery.each(this.hiddenPool,function(c,d){if(d!=null){if(a.selector==d.selector){switch(b){case"disable":jQuerySnoop.hiddenPool[c].enable=false;break;case"enable":jQuerySnoop.hiddenPool[c].enable=true;break;case"destroy":jQuerySnoop.hiddenPool[c]=null;break;default:break}}}})},listen:function(){this.thread=window.setInterval(jQuerySnoop.check,this.interval)}};if(typeof(jQuery)!="function"){alert("jQuerySnoop: jQuery is not properly loaded.")}else{var ver=jQuery.fn.jquery.split(".");if(ver[0]<1||ver[1]<3){alert("jQuerySnoop: jQuery incompatible version.\nPlease use jQuery 1.3+")}else{jQuery.fn.snoop=function(a){if(typeof(a)=="function"){jQuerySnoop.heap(this,a)}else{if(typeof(a)=="string"){jQuerySnoop.doAction(this,a)}}};jQuery.extend({snoop:function(a,b){if(typeof(a)=="string"){jQuerySnoop.setOption(a,b)}}});jQuery.fn.onValueChange=function(a){jQuery(this.selector).snoop(a)}}};
